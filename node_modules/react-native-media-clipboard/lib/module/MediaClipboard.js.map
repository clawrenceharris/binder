{"version":3,"sources":["MediaClipboard.ts"],"names":["NativeModules","NativeEventEmitter","Platform","MediaClipboard","process","env","NODE_ENV","OS","console","log","Error","clipboard","urls","strings","hasImages","hasURLs","hasStrings","mediaSource","emitter","select","ios","android","listenToClipboardChanges","listener","addListener","stopListeningToClipboardChanges","removeListener","listenToClipboardRemove","stopListeningToClipboardRemove","getClipboardContents","Promise","resolve","reject","getContent","err","contents","getClipboardMediaSource","global","Clipboard","getMediaSource","clipboardMediaSource","_","content"],"mappings":"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","sourcesContent":["import { NativeModules, NativeEventEmitter, Platform } from \"react-native\";\n\nexport type MediaSource = {\n  uri: string;\n  mimeType: string;\n  width: number;\n  height: number;\n};\n\nexport type ClipboardResponse = {\n  urls: Array<string>;\n  strings: Array<string>;\n  hasImages: Boolean;\n  hasURLs: Boolean;\n  hasStrings: Boolean;\n};\n\nexport let MediaClipboard = NativeModules[\"MediaClipboard\"];\n\nif (\n  // @ts-ignore\n  process.env.NODE_ENV !== \"production\" &&\n  !MediaClipboard &&\n  Platform.OS === \"ios\"\n) {\n  console.log({ MediaClipboard });\n  throw new Error(\n    \"Please ensure react-native-media-clipboard is linked, that you ran pod install, that you imported <react-native-media-clipboard/MediaClipboard.h> in your AppDelegate.m, and that you re-built the iOS app.\"\n  );\n} else if (!MediaClipboard && Platform.OS !== \"ios\") {\n  MediaClipboard = {\n    clipboard: {\n      urls: [],\n      strings: [],\n      hasImages: false,\n      hasURLs: false,\n      hasStrings: false\n    },\n    mediaSource: null\n  };\n}\n\nconst emitter = Platform.select({\n  ios: new NativeEventEmitter(MediaClipboard),\n  android: null\n});\n\nexport const listenToClipboardChanges = listener =>\n  emitter && emitter.addListener(\"MediaClipboardChange\", listener);\n\nexport const stopListeningToClipboardChanges = listener =>\n  emitter && emitter.removeListener(\"MediaClipboardChange\", listener);\n\nexport const listenToClipboardRemove = listener =>\n  emitter && emitter.addListener(\"MediaClipboardRemove\", listener);\n\nexport const stopListeningToClipboardRemove = listener =>\n  emitter && emitter.removeListener(\"MediaClipboardRemove\", listener);\n\nexport const getClipboardContents = (): Promise<ClipboardResponse> => {\n  return new Promise((resolve, reject) => {\n    if (Platform.OS === \"android\") {\n      resolve({\n        urls: [],\n        strings: [],\n        hasImages: false,\n        hasURLs: false,\n        hasStrings: false\n      });\n      return;\n    }\n\n    MediaClipboard.getContent((err, contents) => {\n      if (err) {\n        reject(err);\n        return;\n      } else {\n        resolve(contents);\n      }\n    });\n  });\n};\n\nexport const getClipboardMediaSource = (): Promise<MediaSource | null> => {\n  if (Platform.OS === \"android\") {\n    return Promise.resolve(null);\n  }\n\n  // @ts-ignore\n  if (typeof global.Clipboard !== \"undefined\") {\n    // @ts-ignore\n    return global.Clipboard.getMediaSource();\n  } else {\n    return new Promise(resolve =>\n      MediaClipboard.clipboardMediaSource((_, content) => {\n        resolve(content);\n        return;\n      })\n    );\n  }\n};\n"]}